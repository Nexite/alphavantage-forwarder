generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Ip {
  ip          String   @id
  timesCalled Int
  lastCall    DateTime
}

model Ticker {
  name        String   @id
  timesCalled Int
  lastCall    DateTime
}

//Symbol -  char 6
//  Date -  date
//  Time -  time
//  Open -  decimal 18, 4
//  High -  decimal 18, 4
//  Low -  decimal 18, 4
//  Close -  decimal 18, 4
//  Volume -  int

model HistoricalStock {
  id          String   @id
  symbol      String
  date        DateTime
  open        Decimal
  high        Decimal
  low         Decimal
  close       Decimal
  volume      Int

  @@index([symbol, date])
  @@index([date])
}

model HistoricalOptionsChain {
  id          String   @id // format: "{symbol}-{date}"
  symbol      String
  date        DateTime
  options     Json     // Store all options for this date as an array

  @@index([symbol, date])
  @@index([date])
  @@index([symbol])
}

model Quote {
  id          String   @id
  symbol      String
  close       Decimal
  lastUpdated DateTime @updatedAt
}
